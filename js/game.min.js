function t(){l.load.spritesheet("ghost_red","img/ghost_red.png",20,20),l.load.spritesheet("start_button","img/button.png",100,40),l.load.spritesheet("start_button_animation","img/startbuttonsprites.png",100,40),l.load.spritesheet("pacman","img/pacman.png",20,20),l.load.image("fruit","img/fruit.png")}function a(){l.physics.startSystem(Phaser.Physics.ARCADE),l.physics.arcade.gravity.y=100,y=l.add.text(10,10,"Score: "+m,{font:"16px Arial",fill:"green"}),y.anchor.set(0),f=l.add.text(10,30,"Fail: "+h,{font:"16px Arial",fill:"red"}),f.anchor.set(0),startButtonAnimation=l.add.sprite(l.world.centerX,l.world.centerY,"start_button_animation"),startButtonAnimation.anchor.set(.5,.5),startButtonAnimation.animations.add("anim",[0,1,2,4],5,!1),b=l.add.button(l.world.centerX,l.world.centerY,"start_button",r,this,1,0,1),b.anchor.set(.5,.5),p=l.add.group(),p.enableBody=!0,p.physicsBodyType=Phaser.Physics.ARCADE,p.createMultiple(50,"ghost_red"),p.setAll("checkWorldBounds",!0),p.setAll("outOfBoundsKill",!0),p.callAll("events.onOutOfBounds.add","events.onOutOfBounds",s),p.callAll("animations.add","animations","look",[0,1,6,7,2,3,4,5],5,!0),p.callAll("animations.play","animations","look"),c=l.add.group(),c.enableBody=!0,c.physicsBodyType=Phaser.Physics.ARCADE,c.createMultiple(50,"fruit"),c.setAll("checkWorldBounds",!0),c.setAll("outOfBoundsKill",!0),c.setAll("body.allowGravity",!1),u=l.add.sprite(l.world.centerX,580,"pacman"),u.anchor.set(.5),u.frame=3,u.animations.add("eat",[2,3,4],10,!1),A=l.input.keyboard.addKey(Phaser.Keyboard.LEFT),g=l.input.keyboard.addKey(Phaser.Keyboard.RIGHT),l.physics.arcade.enable([u,p]),u.body.allowGravity=!1}function e(){l.physics.arcade.collide(c,p,i),u.rotation=l.physics.arcade.angleToPointer(u),y.text="Score: "+m,f.text="Fail: "+h,w&&(l.input.activePointer.isDown&&(o(),u.animations.play("eat")),A.isDown&&u.x>10?u.x=u.x-D:g.isDown&&u.x<590&&(u.x=u.x+D),n())}function n(){if(l.time.now>v&&p.countDead()>0){v=l.time.now+P;var t=p.getFirstDead();t.reset(l.world.randomX,10)}}function o(){if(l.time.now>x&&c.countDead()>0){x=l.time.now+B;var t=c.getFirstDead();t.reset(u.x-8,u.y-8),l.physics.arcade.moveToPointer(t,300)}}function i(t,a){t.kill(),a.kill(),m++}function s(t){t.kill(),h++}function r(){b.destroy(),startButtonAnimation.animations.play("anim"),setTimeout(d,1e3)}function d(){startButtonAnimation.destroy(),w=!0}var l=new Phaser.Game(800,600,Phaser.AUTO,"phaser-example",{preload:t,create:a,update:e}),c,u,p,m=0,y,h=0,f,A,g,b,w=!1,B=100,x=0,P=1e3,v=0,D=3;